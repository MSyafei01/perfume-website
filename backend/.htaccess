RewriteEngine On

# CORS headers
Header always set Access-Control-Allow-Origin "http://localhost:3000"
Header always set Access-Control-Allow-Methods "GET, POST, PUT, DELETE, OPTIONS"
Header always set Access-Control-Allow-Headers "Content-Type, Authorization"

# API routing
RewriteRule ^api/products/?$ api/products/index.php [L]
RewriteRule ^api/products/([0-9]+)/?$ api/products/index.php?id=$1 [L]
RewriteRule ^api/orders/?$ api/orders/index.php [L]

# Security
<Files "config.php">
    Order allow,deny
    Deny from all
</Files>

<Files ".htaccess">
    Order allow,deny
    Deny from all
</Files>